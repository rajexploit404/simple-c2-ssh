<!doctype html>
<html>
<head>
<title>Health SSH {{ ssh_info.host }}</title>
<style>
body {
    background: #0d0d0d;
    color: #00ff99;
    font-family: 'Courier New', monospace;
    padding: 20px;
}
h2 { color: #00ff99; }
a { color: #00ff99; text-decoration: none; }
a:hover { text-decoration: underline; }

.container { display: flex; flex-wrap: wrap; gap: 20px; margin-top: 20px; }
.box {
    background: #111;
    border: 1px solid #00ff99;
    border-radius: 8px;
    padding: 15px;
    width: 300px;
    max-height: 300px;
    overflow: auto;
}
.box h3 { margin-top:0; color:#00ff99; }
pre { white-space: pre-wrap; word-wrap: break-word; background:#111; padding:5px; color:#00ff99; }
button {
    padding:5px 10px; margin-bottom:10px;
    background:#00ff99; border:none; border-radius:5px; color:#0d0d0d; cursor:pointer;
}
button:hover { background:#00cc77; }
</style>
</head>
<body>
<h2>Health Check: {{ ssh_info.host }}:{{ ssh_info.port }} - {{ ssh_info.user }}</h2>
<a href="{{ url_for('dashboard') }}">&lt; Back to Dashboard</a>
<button onclick="refreshHealth()">Refresh</button>

<div class="container">
{% for k,v in output.items() %}
<div class="box">
    <h3>{{ k|capitalize }}</h3>
    <pre>{{ v }}</pre>
</div>
{% endfor %}
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
function refreshHealth(){
    $.get("/health_page/{{ ssh_index }}", function(html){
        let newDoc = new DOMParser().parseFromString(html, 'text/html');
        let newContainer = newDoc.querySelector('.container').innerHTML;
        document.querySelector('.container').innerHTML = newContainer;
    });
}
</script>
</body>
</html>
